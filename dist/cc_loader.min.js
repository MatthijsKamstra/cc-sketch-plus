!function(e,g){"use strict";function t(){return v.__string_rec(this,"")}var n,h=h||{};function r(e,t){var n,r=Object.create(e);for(n in t)r[n]=t[n];return t.toString!==Object.prototype.toString&&(r.toString=t.toString),r}function d(e,t){this.r=new RegExp(e,t.split("u").join(""))}d.__name__=!0,d.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m}};function o(){}o.__name__=!0,o.cca=function(e,t){t=e.charCodeAt(t);if(t==t)return t},o.substr=function(e,t,n){if(null==n)n=e.length;else if(n<0){if(0!=t)return"";n=e.length+n}return e.substr(t,n)},o.now=function(){return Date.now()};function l(){}l.__name__=!0,l.exists=function(e,t){for(var n=(e=e)instanceof Array?new S(e):e.iterator();n.hasNext();)if(t(n.next()))return!0;return!1},Math.__name__=!0;function i(){}i.__name__=!0,i.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)};function p(){}p.__name__=!0,p.string=function(e){return v.__string_rec(e,"")};function f(){}f.__name__=!0,f.isSpace=function(e,t){t=o.cca(e,t);return 8<t&&t<14||32==t},f.ltrim=function(e){for(var t=e.length,n=0;n<t&&f.isSpace(e,n);)++n;return 0<n?o.substr(e,n,t-n):e},f.rtrim=function(e){for(var t=e.length,n=0;n<t&&f.isSpace(e,t-n-1);)++n;return 0<n?o.substr(e,0,t-n):e};function m(e,t,n){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=n?n:this}m.__name__=!0,m.caught=function(e){return e instanceof m?e:e instanceof Error?new m(e.message,null,e):new _(e,null,e)},m.thrown=function(e){return e instanceof m?e.get_native():e instanceof Error?e:new _(e)},m.__super__=Error,m.prototype=r(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException}});function s(e){var t=this;this.id=setInterval(function(){t.run()},e)}s.__name__=!0,s.delay=function(e,t){var n=new s(t);return n.run=function(){n.stop(),e()},n},s.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var _=function(e,t,n){m.call(this,String(e),t,n),this.value=e};_.__name__=!0,_.__super__=m,_.prototype=r(m.prototype,{unwrap:function(){return this.value}});function y(){this.h=Object.create(null)}function a(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=D(this,this.onData)}a.__name__=y.__name__=!0,a.prototype={onData:function(e){},onBytes:function(e){},onError:function(e){},onStatus:function(e){},hasOnData:function(){return D(this,this.onData)!=this.emptyOnData},success:function(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,c.UTF8)),this.responseAsString}};function u(e){this.async=!0,this.withCredentials=!1,a.call(this,e)}u.__name__=!0,u.__super__=a,u.prototype=r(a.prototype,{request:function(e){var c=this;this.responseAsString=null,this.responseBytes=null,this.responseHeaders=null;function t(e){if(4==h.readyState){var t,n;try{t=h.status}catch(o){t=null}if(0==t&&b.get_supported()&&null!=g.location&&(n=g.location.protocol.toLowerCase(),new d("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(n)&&(t=null!=h.response?200:404)),null==t&&(t=null),null!=t&&c.onStatus(t),null!=t&&200<=t&&t<400){c.req=null;for(var r=h.getAllResponseHeaders().split("\r\n"),o=[],i=0,s=r;i<s.length;){var _=s[i];++i,""!=_&&o.push(_)}r=o;var a=new y;c.responseHeaders=a;for(o=0;o<r.length;){var u=r[o];++o;var l=u.split(": "),u=l.shift(),l=1==l.length?l[0]:l.join(": "),l=f.ltrim(f.rtrim(l));c.responseHeaders.h[u]=l}c.success(x.ofData(h.response))}else if(null==t||0==t&&null==h.response)c.req=null,c.onError("Failed to connect or resolve host");else if(null==t){a=(c.req=null)!=h.response?x.ofData(h.response):null;c.responseBytes=a,c.onError("Http Error #"+h.status)}else switch(t){case 12007:c.req=null,c.onError("Unknown host");break;case 12029:c.req=null,c.onError("Failed to connect to host");break;default:a=(c.req=null)!=h.response?x.ofData(h.response):null;c.responseBytes=a,c.onError("Http Error #"+h.status)}}}var h=this.req=b.createXMLHttpRequest();this.async&&(h.onreadystatechange=t);var n,r,o=this.postData,i=this.postBytes;if(null!=(n=null==o?null==i?null:new Blob([i.b.bufferValue]):null==i?o:null))e=!0;else for(o=0,i=this.params;o<i.length;){var s=i[o];++o,n=null==n?"":(null==n?"null":p.string(n))+"&";var _=s.name,_=(null==n?"null":p.string(n))+encodeURIComponent(_)+"=",s=s.value;n=_+encodeURIComponent(s)}try{e?h.open("POST",this.url,this.async):null!=n?(r=this.url.split("?").length<=1,h.open("GET",this.url+(r?"?":"&")+(null==n?"null":p.string(n)),this.async),n=null):h.open("GET",this.url,this.async),h.responseType="arraybuffer"}catch(o){var a=m.caught(o).unwrap();return this.req=null,void this.onError(a.toString())}h.withCredentials=this.withCredentials,!l.exists(this.headers,function(e){return"Content-Type"==e.name})&&e&&null==this.postData&&h.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(o=0,i=this.headers;o<i.length;){var u=i[o];++o,h.setRequestHeader(u.name,u.value)}h.send(n),this.async||t()}});var x=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};x.__name__=!0,x.ofData=function(e){var t=e.hxBytes;return null!=t?t:new x(e)},x.prototype={getString:function(e,t,n){if(e<0||t<0||e+t>this.length)throw m.thrown(w.OutsideBounds);null==n&&(n=c.UTF8);var r="",o=this.b,i=e,s=e+t;switch(n._hx_index){case 0:for(var _,a;i<s;)if((u=o[i++])<128){if(0==u)break;r+=String.fromCodePoint(u)}else u<224?(_=(63&u)<<6|127&o[i++],r+=String.fromCodePoint(_)):u<240?(a=(31&u)<<12|(127&o[i++])<<6|127&o[i++],r+=String.fromCodePoint(a)):(a=(15&u)<<18|(127&o[i++])<<12|(127&o[i++])<<6|127&o[i++],r+=String.fromCodePoint(a));break;case 1:for(;i<s;){var u=o[i++]|o[i++]<<8;r+=String.fromCodePoint(u)}}return r}};var c=h["haxe.io.Encoding"]={__ename__:!0,__constructs__:null,UTF8:{_hx_name:"UTF8",_hx_index:0,__enum__:"haxe.io.Encoding",toString:t},RawNative:{_hx_name:"RawNative",_hx_index:1,__enum__:"haxe.io.Encoding",toString:t}};c.__constructs__=[c.UTF8,c.RawNative];var w=h["haxe.io.Error"]={__ename__:!0,__constructs__:null,Blocked:{_hx_name:"Blocked",_hx_index:0,__enum__:"haxe.io.Error",toString:t},Overflow:{_hx_name:"Overflow",_hx_index:1,__enum__:"haxe.io.Error",toString:t},OutsideBounds:{_hx_name:"OutsideBounds",_hx_index:2,__enum__:"haxe.io.Error",toString:t},Custom:((n=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:t}})._hx_name="Custom",n.__params__=["e"],n)};w.__constructs__=[w.Blocked,w.Overflow,w.OutsideBounds,w.Custom];var S=function(e){this.current=0,this.array=e};S.__name__=!0,S.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]}};var v=function(){};v.__name__=!0,v.__string_rec=function(o,i){if(null==o)return"null";if(5<=i.length)return"<...>";var e,t=typeof o;switch("function"==t&&(o.__name__||o.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(o.__enum__){var s=h[o.__enum__].__constructs__[o._hx_index],n=s._hx_name;return s.__params__?(i+="\t",n+"("+function(){for(var e=[],t=0,n=s.__params__;t<n.length;){var r=n[t];t+=1,e.push(v.__string_rec(o[r],i))}return e}().join(",")+")"):n}if(o instanceof Array){var r="[";i+="\t";for(var _=0,a=o.length;_<a;){var u=_++;r+=(0<u?",":"")+v.__string_rec(o[u],i)}return r+="]"}try{e=o.toString}catch(_){return"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){n=o.toString();if("[object Object]"!=n)return n}r="{\n";i+="\t";var l=null!=o.hasOwnProperty,c=null;for(c in o)l&&!o.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=r.length&&(r+=", \n"),r+=i+c+" : "+v.__string_rec(o[c],i));return r+="\n"+(i=i.substring(1))+"}";case"string":return o;default:return String(o)}};var b=function(){};b.__name__=!0,b.get_supported=function(){return"undefined"!=typeof window&&void 0!==window.location&&"string"==typeof window.location.protocol},b.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw m.thrown("Unable to create XMLHttpRequest object.")};var T=e.Loader=function(e){this._loadCounter=0,this._isDebug=!1,this._loadingArray=[],null==e?this.set__id(this.toString()+"_"+(new Date).getTime()):this.set__id(e)};T.__name__=!0,T.create=function(e){return new T(e)},T.getID=function(e){for(var t=null,n=0,r=T.completeArray.length;n<r;){var o=n++,o=T.completeArray[o];if(o._id==e){t=o;break}if(-1!=o._id.indexOf(e)){t=o;break}}return t},T.getImageByID=function(e){return T.getID(e).image},T.prototype={isDebug:function(e){return null==e&&(e=!0),this.set__isDebug(e),this},add:function(e,t,n){t={_id:e,path:e,type:null==n?this.fileType(e):n,time:{},filesize:{},func:t};return this.get__isDebug()&&g.console.debug(t),this.get__loadingArray().push(t),this},load:function(){return this.get__isDebug()&&g.console.debug("init loading"),this.loadingHandler(),this},onComplete:function(e,t){return this._onComplete=e,this._onCompleteParams=t,this},onUpdate:function(e,t){return this._onUpdate=e,this._onUpdateParams=t,this},onProgress:function(e,t){return this._onProgress=e,this._onProgressParams=t,this},onError:function(e,t){return this._onError=e,this._onErrorParams=t,this},onInit:function(e,t){return this._onInit=e,this._onInitParams=t,this},fileType:function(e){var t=k.Unknown,e=e.split(".")[e.split(".").length-1];switch(e.toLowerCase()){case"csv":t=k.CSV;break;case"gif":t=k.GIF;break;case"jpeg":case"jpg":t=k.JPG;break;case"json":t=k.JSON;break;case"png":t=k.PNG;break;case"svg":t=k.SVG;break;case"txt":t=k.TXT;break;case"xml":t=k.XML;break;default:t=k.Unknown}return this.get__isDebug()&&g.console.log(e),t},loadingHandler:function(){var e=this;if(this._loadCounter>=this.get__loadingArray().length)return this.get__isDebug()&&g.console.debug(this.toString()+" :: Loading queue is done"),this.get__isDebug()&&g.console.debug("show completed array: "+p.string(T.completeArray)),this.get__isDebug()&&g.console.debug("length of complete files: "+T.completeArray.length),void(i.isFunction(this._onComplete)&&s.delay(function(){e._onComplete.apply(e._onComplete,[T.completeArray])},1));var t=this.get__loadingArray()[this._loadCounter];switch(t.type._hx_index){case 1:case 8:case 10:case 11:case 12:this.imageLoader(t);break;case 6:this.textLoaderBig(t);break;case 4:case 14:case 16:case 18:this.textLoader(t);break;default:g.console.warn('not sure what this type is?: "'+t.path+'"')}},imageLoader:function(e){var t=this;e.time.start=new Date;var n=new Image;n.crossOrigin="Anonymous",n.src=e.path,n.onload=function(){e.time.end=new Date,e.time.durationMS=e.time.end.getTime()-e.time.start.getTime(),e.time.durationS=(e.time.end.getTime()-e.time.start.getTime())/1e3,t.get__isDebug()&&(console.log("src/sketcher/load/Loader.hx:324:","image source: "+n.src),console.log("src/sketcher/load/Loader.hx:325:","image width: "+n.width),console.log("src/sketcher/load/Loader.hx:326:","image height: "+n.height)),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:330:","complete array length: "+T.completeArray.length),e.image=n,T.completeArray.push(e),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:334:","complete array: "+p.string(T.completeArray)),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:336:","complete array length: "+T.completeArray.length),i.isFunction(e.func)&&e.func.apply(e.func,[e]),i.isFunction(t._onUpdate)&&t._onUpdate.apply(t._onUpdate,[n]),t._loadCounter++,t.loadingHandler()},n.onerror=function(){i.isFunction(t._onError)&&t._onError.apply(t._onError,[n]),t._loadCounter++,t.loadingHandler()},n.onprogress=function(){i.isFunction(t._onProgress)&&t._onProgress.apply(t._onProgress,[n])}},textLoader:function(n){var r=this,t=n.path;n.time.start=new Date;var o=new u(t);o.onData=function(e){n.filesize.bytes=o.responseBytes.length,n.filesize.KiB=o.responseBytes.length/1024,n.filesize.MiB=o.responseBytes.length/1024/1024,n.filesize.GiB=o.responseBytes.length/1024/1024/1024;try{n.str=e,n.time.end=new Date,n.time.durationMS=n.time.end.getTime()-n.time.start.getTime(),n.time.durationS=(n.time.end.getTime()-n.time.start.getTime())/1e3,n.type==k.Json?n.json=JSON.parse(e):n.json="",T.completeArray.push(n),i.isFunction(n.func)&&n.func.apply(n.func,[n]),i.isFunction(r._onUpdate)&&r._onUpdate.apply(r._onUpdate,["_img"]),r._loadCounter++,r.loadingHandler()}catch(e){var t=m.caught(e).unwrap();r.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:402:",t),i.isFunction(r._onError)&&r._onError.apply(r._onError,[t]),r._loadCounter++,r.loadingHandler()}},o.onError=function(e){r.get__isDebug()&&g.console.error("error: "+e+", "+t),i.isFunction(r._onError)&&r._onError.apply(r._onError,[e]),r._loadCounter++,r.loadingHandler()},o.onStatus=function(e){r.get__isDebug()&&g.console.debug("status: "+e)},o.request(!1),i.isFunction(this._onInit)&&this._onInit.apply(this._onInit,["start loading file"])},textLoaderBig:function(n){var r=this;this.get__isDebug()&&g.console.info("["+p.string(n.type)+"] loader: "+n.path);var e=n.path;n.time.start=new Date;var o=new XMLHttpRequest;switch(o.open("GET",e,!0),o.onreadystatechange=function(e){4==o.readyState&&404==o.status&&g.console.warn("looks like the file doesn't exist at path: "+n.path)},o.ontimeout=function(e){g.console.log(e)},n.type._hx_index){case 5:case 6:o.responseType="json";break;case 15:o.responseType="text";break;default:o.responseType="text",g.console.warn("case '"+p.string(n.type)+"': trace ('"+p.string(n.type)+"');")}o.onload=function(e){var t=o.response;r.get__isDebug()&&g.console.log(e),n.filesize.bytes=e.total,n.filesize.KiB=e.total/1024,n.filesize.MiB=e.total/1024/1024,n.filesize.GiB=e.total/1024/1024/1024,n.str=t,n.data=t,n.time.end=new Date,n.time.durationMS=n.time.end.getTime()-n.time.start.getTime(),n.time.durationS=(n.time.end.getTime()-n.time.start.getTime())/1e3,T.completeArray.push(n),i.isFunction(n.func)&&n.func.apply(n.func,[n]),i.isFunction(r._onUpdate)&&r._onUpdate.apply(r._onUpdate,["_img"]),r._loadCounter++,r.loadingHandler()},o.onerror=function(e){g.console.warn(e),i.isFunction(r._onError)&&r._onError.apply(r._onError,[e]),r._loadCounter++,r.loadingHandler()},o.onprogress=function(e){i.isFunction(r._onProgress)&&r._onProgress.apply(r,[e.loaded,e.total,e.loaded/e.total])},o.onloadstart=function(){r.get__isDebug()&&g.console.debug("["+p.string(n.type)+"] onloadstart"),i.isFunction(r._onProgress)&&r._onProgress.apply(r._onProgress,[0,1,0]),i.isFunction(r._onInit)&&r._onInit.apply(r._onInit,["init"])},o.onloadend=function(){r.get__isDebug()&&g.console.debug("["+p.string(n.type)+"] onloadend"),i.isFunction(r._onProgress)&&r._onProgress.apply(r._onProgress,[1,1,1])},o.send()},get__id:function(){return this._id},set__id:function(e){return this._id=e},get__loadingArray:function(){return this._loadingArray},set__loadingArray:function(e){return this._loadingArray=e},get__isDebug:function(){return this._isDebug},set__isDebug:function(e){return this._isDebug=e},toString:function(){return"[Loader]"}};var k=h["sketcher.load.FileType"]={__ename__:!0,__constructs__:null,Unknown:{_hx_name:"Unknown",_hx_index:0,__enum__:"sketcher.load.FileType",toString:t},Img:{_hx_name:"Img",_hx_index:1,__enum__:"sketcher.load.FileType",toString:t},IMG:{_hx_name:"IMG",_hx_index:2,__enum__:"sketcher.load.FileType",toString:t},Txt:{_hx_name:"Txt",_hx_index:3,__enum__:"sketcher.load.FileType",toString:t},TXT:{_hx_name:"TXT",_hx_index:4,__enum__:"sketcher.load.FileType",toString:t},Json:{_hx_name:"Json",_hx_index:5,__enum__:"sketcher.load.FileType",toString:t},JSON:{_hx_name:"JSON",_hx_index:6,__enum__:"sketcher.load.FileType",toString:t},Gif:{_hx_name:"Gif",_hx_index:7,__enum__:"sketcher.load.FileType",toString:t},GIF:{_hx_name:"GIF",_hx_index:8,__enum__:"sketcher.load.FileType",toString:t},Png:{_hx_name:"Png",_hx_index:9,__enum__:"sketcher.load.FileType",toString:t},PNG:{_hx_name:"PNG",_hx_index:10,__enum__:"sketcher.load.FileType",toString:t},JPEG:{_hx_name:"JPEG",_hx_index:11,__enum__:"sketcher.load.FileType",toString:t},JPG:{_hx_name:"JPG",_hx_index:12,__enum__:"sketcher.load.FileType",toString:t},Xml:{_hx_name:"Xml",_hx_index:13,__enum__:"sketcher.load.FileType",toString:t},XML:{_hx_name:"XML",_hx_index:14,__enum__:"sketcher.load.FileType",toString:t},Svg:{_hx_name:"Svg",_hx_index:15,__enum__:"sketcher.load.FileType",toString:t},SVG:{_hx_name:"SVG",_hx_index:16,__enum__:"sketcher.load.FileType",toString:t},Csv:{_hx_name:"Csv",_hx_index:17,__enum__:"sketcher.load.FileType",toString:t},CSV:{_hx_name:"CSV",_hx_index:18,__enum__:"sketcher.load.FileType",toString:t}};function D(e,t){return null==t?null:(null==t.__id__&&(t.__id__=g.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=t.bind(e),e.hx__closures__[t.__id__]=n),n);var n}k.__constructs__=[k.Unknown,k.Img,k.IMG,k.Txt,k.TXT,k.Json,k.JSON,k.Gif,k.GIF,k.Png,k.PNG,k.JPEG,k.JPG,k.Xml,k.XML,k.Svg,k.SVG,k.Csv,k.CSV],g.$haxeUID|=0,"undefined"!=typeof performance&&"function"==typeof performance.now&&(o.now=performance.now.bind(performance)),null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.__name__=!0,Array.__name__=!0,Date.__name__="Date",v.__toStr={}.toString,T.completeArray=[]}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);