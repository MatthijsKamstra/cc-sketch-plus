!function(e,h){"use strict";function t(){return x.__string_rec(this,"")}var n,d=d||{};function r(e,t){var n,r=Object.create(e);for(n in t)r[n]=t[n];return t.toString!==Object.prototype.toString&&(r.toString=t.toString),r}function g(e,t){this.r=new RegExp(e,t.split("u").join(""))}g.__name__=!0,g.prototype={match:function(e){return this.r.global&&(this.r.lastIndex=0),this.r.m=this.r.exec(e),this.r.s=e,null!=this.r.m}};function p(){}p.__name__=!0,p.exists=function(e,t){for(var n=(e=e)instanceof Array?new u(e):e.iterator();n.hasNext();)if(t(n.next()))return!0;return!1},Math.__name__=!0;function i(){}i.__name__=!0,i.isFunction=function(e){return"function"==typeof e&&!(e.__name__||e.__ename__)},i.compareMethods=function(e,t){return e==t||!(!i.isFunction(e)||!i.isFunction(t))&&(e.scope==t.scope&&e.method==t.method&&null!=e.method)};function f(){}f.__name__=!0,f.string=function(e){return x.__string_rec(e,"")};function m(e,t,n){Error.call(this,e),this.message=e,this.__previousException=t,this.__nativeException=null!=n?n:this}m.__name__=!0,m.caught=function(e){return e instanceof m?e:e instanceof Error?new m(e.message,null,e):new s(e,null,e)},m.thrown=function(e){return e instanceof m?e.get_native():e instanceof Error?e:new s(e)},m.__super__=Error,m.prototype=r(Error.prototype,{unwrap:function(){return this.__nativeException},get_native:function(){return this.__nativeException}});function o(e){var t=this;this.id=setInterval(function(){t.run()},e)}o.__name__=!0,o.delay=function(e,t){var n=new o(t);return n.run=function(){n.stop(),e()},n},o.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){}};var s=function(e,t,n){m.call(this,String(e),t,n),this.value=e};s.__name__=!0,s.__super__=m,s.prototype=r(m.prototype,{unwrap:function(){return this.value}});function a(e){this.url=e,this.headers=[],this.params=[],this.emptyOnData=w(this,this.onData)}a.__name__=!0,a.prototype={onData:function(e){},onBytes:function(e){},onError:function(e){},onStatus:function(e){},hasOnData:function(){return!i.compareMethods(w(this,this.onData),this.emptyOnData)},success:function(e){this.responseBytes=e,this.responseAsString=null,this.hasOnData()&&this.onData(this.get_responseData()),this.onBytes(this.responseBytes)},get_responseData:function(){return null==this.responseAsString&&null!=this.responseBytes&&(this.responseAsString=this.responseBytes.getString(0,this.responseBytes.length,l.UTF8)),this.responseAsString}};function _(e){this.async=!0,this.withCredentials=!1,a.call(this,e)}_.__name__=!0,_.__super__=a,_.prototype=r(a.prototype,{request:function(e){var o=this;this.responseAsString=null,this.responseBytes=null;function t(e){if(4==i.readyState){var t,n;try{t=i.status}catch(e){t=null}if(0==t&&"undefined"!=typeof window&&null!=h.location&&(n=h.location.protocol.toLowerCase(),new g("^(?:about|app|app-storage|.+-extension|file|res|widget):$","").match(n)&&(t=null!=i.response?200:404)),null==t&&(t=null),null!=t&&o.onStatus(t),null!=t&&200<=t&&t<400)o.req=null,o.success(y.ofData(i.response));else if(null==t||0==t&&null==i.response)o.req=null,o.onError("Failed to connect or resolve host");else if(null==t){var r=(o.req=null)!=i.response?y.ofData(i.response):null;o.responseBytes=r,o.onError("Http Error #"+i.status)}else switch(t){case 12007:o.req=null,o.onError("Unknown host");break;case 12029:o.req=null,o.onError("Failed to connect to host");break;default:r=(o.req=null)!=i.response?y.ofData(i.response):null;o.responseBytes=r,o.onError("Http Error #"+i.status)}}}var i=this.req=S.createXMLHttpRequest();this.async&&(i.onreadystatechange=t);var n,r,s=this.postBytes;if(null!=(n=null==(a=this.postData)?null==s?null:new Blob([s.b.bufferValue]):null==s?a:null))e=!0;else for(var s=0,a=this.params;s<a.length;){var _=a[s];++s,n=null==n?"":(null==n?"null":f.string(n))+"&";var u=_.name,u=(null==n?"null":f.string(n))+encodeURIComponent(u)+"=",_=_.value;n=u+encodeURIComponent(_)}try{e?i.open("POST",this.url,this.async):null!=n?(r=this.url.split("?").length<=1,i.open("GET",this.url+(r?"?":"&")+(null==n?"null":f.string(n)),this.async),n=null):i.open("GET",this.url,this.async),i.responseType="arraybuffer"}catch(s){var l=m.caught(s).unwrap();return this.req=null,void this.onError(l.toString())}i.withCredentials=this.withCredentials,!p.exists(this.headers,function(e){return"Content-Type"==e.name})&&e&&null==this.postData&&i.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(s=0,a=this.headers;s<a.length;){var c=a[s];++s,i.setRequestHeader(c.name,c.value)}i.send(n),this.async||t()}});var y=function(e){this.length=e.byteLength,this.b=new Uint8Array(e),(this.b.bufferValue=e).hxBytes=this,e.bytes=this.b};y.__name__=!0,y.ofData=function(e){var t=e.hxBytes;return null!=t?t:new y(e)},y.prototype={getString:function(e,t,n){if(e<0||t<0||e+t>this.length)throw m.thrown(c.OutsideBounds);null==n&&(n=l.UTF8);var r="",o=this.b,i=e,s=e+t;switch(n._hx_index){case 0:for(var a,_;i<s;)if((u=o[i++])<128){if(0==u)break;r+=String.fromCodePoint(u)}else u<224?(a=(63&u)<<6|127&o[i++],r+=String.fromCodePoint(a)):u<240?(_=(31&u)<<12|(127&o[i++])<<6|127&o[i++],r+=String.fromCodePoint(_)):(_=(15&u)<<18|(127&o[i++])<<12|(127&o[i++])<<6|127&o[i++],r+=String.fromCodePoint(_));break;case 1:for(;i<s;){var u=o[i++]|o[i++]<<8;r+=String.fromCodePoint(u)}}return r}};var l=d["haxe.io.Encoding"]={__ename__:!0,__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:t},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:t}},c=d["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:t},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:t},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:t},Custom:((n=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:t}}).__params__=["e"],n)},u=function(e){this.current=0,this.array=e};u.__name__=!0,u.prototype={hasNext:function(){return this.current<this.array.length},next:function(){return this.array[this.current++]}};var x=function(){};x.__name__=!0,x.__string_rec=function(o,i){if(null==o)return"null";if(5<=i.length)return"<...>";var e,t=typeof o;switch("function"==t&&(o.__name__||o.__ename__)&&(t="object"),t){case"function":return"<function>";case"object":if(o.__enum__){var t=d[o.__enum__],n=t.__constructs__[o._hx_index],s=t[n];return s.__params__?(i+="\t",n+"("+function(){for(var e=[],t=0,n=s.__params__;t<n.length;){var r=n[t];t+=1,e.push(x.__string_rec(o[r],i))}return e}().join(",")+")"):n}if(o instanceof Array){var r="[";i+="\t";for(var a=0,_=o.length;a<_;){var u=a++;r+=(0<u?",":"")+x.__string_rec(o[u],i)}return r+="]"}try{e=o.toString}catch(a){return"???"}if(null!=e&&e!=Object.toString&&"function"==typeof e){n=o.toString();if("[object Object]"!=n)return n}r="{\n";i+="\t";var l=null!=o.hasOwnProperty,c=null;for(c in o)l&&!o.hasOwnProperty(c)||"prototype"!=c&&"__class__"!=c&&"__super__"!=c&&"__interfaces__"!=c&&"__properties__"!=c&&(2!=r.length&&(r+=", \n"),r+=i+c+" : "+x.__string_rec(o[c],i));return r+="\n"+(i=i.substring(1))+"}";case"string":return o;default:return String(o)}};var S=function(){};S.__name__=!0,S.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw m.thrown("Unable to create XMLHttpRequest object.")};var b=e.Loader=function(e){this._loadCounter=0,this._isDebug=!1,this.completeArray=[],this._loadingArray=[],null==e?this.set__id(this.toString()+"_"+(new Date).getTime()):this.set__id(e)};b.__name__=!0,b.create=function(e){return new b(e)},b.prototype={isDebug:function(e){return null==e&&(e=!0),this.set__isDebug(e),this},add:function(e,t,n){t={_id:e,path:e,type:null==n?this.fileType(e):n,time:{},filesize:{},func:t};return this.get__isDebug()&&h.console.debug(t),this.get__loadingArray().push(t),this},load:function(){return this.get__isDebug()&&h.console.debug("init loading"),this.loadingHandler(),this},onComplete:function(e,t){return this._onComplete=e,this._onCompleteParams=t,this},onUpdate:function(e,t){return this._onUpdate=e,this._onUpdateParams=t,this},onProgress:function(e,t){return this._onProgress=e,this._onProgressParams=t,this},onError:function(e,t){return this._onError=e,this._onErrorParams=t,this},onInit:function(e,t){return this._onInit=e,this._onInitParams=t,this},fileType:function(e){var t=v.Unknown,e=e.split(".")[e.split(".").length-1];switch(e.toLowerCase()){case"csv":t=v.Csv;break;case"gif":t=v.Gif;break;case"jpeg":case"jpg":t=v.JPG;break;case"json":t=v.Json;break;case"png":t=v.Png;break;case"svg":t=v.Svg;break;case"txt":t=v.Txt;break;case"xml":t=v.Xml;break;default:t=v.Unknown}return this.get__isDebug()&&h.console.log(e),t},loadingHandler:function(){var e=this;if(this._loadCounter>=this.get__loadingArray().length)return this.get__isDebug()&&h.console.debug(this.toString()+" :: Loading queue is done"),this.get__isDebug()&&h.console.debug("show completed array: "+f.string(this.completeArray)),this.get__isDebug()&&h.console.debug("length of complete files: "+this.completeArray.length),void(i.isFunction(this._onComplete)&&o.delay(function(){e._onComplete.apply(e._onComplete,[e.completeArray])},1));var t=this.get__loadingArray()[this._loadCounter];switch(t.type._hx_index){case 3:case 13:case 15:case 17:this.textLoader(t);break;case 5:this.textLoaderBig(t);break;case 1:case 7:case 9:case 11:case 12:this.imageLoader(t);break;default:h.console.warn('not sure what this type is?: "'+t.path+'"')}},imageLoader:function(e){var t=this;e.time.start=new Date;var n=new Image;n.crossOrigin="Anonymous",n.src=e.path,n.onload=function(){e.time.end=new Date,e.time.durationMS=e.time.end.getTime()-e.time.start.getTime(),e.time.durationS=(e.time.end.getTime()-e.time.start.getTime())/1e3,t.get__isDebug()&&(console.log("src/sketcher/load/Loader.hx:278:","image source: "+n.src),console.log("src/sketcher/load/Loader.hx:279:","image width: "+n.width),console.log("src/sketcher/load/Loader.hx:280:","image height: "+n.height)),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:284:","complete array length: "+t.completeArray.length),e.image=n,t.completeArray.push(e),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:288:","complete array: "+f.string(t.completeArray)),t.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:290:","complete array length: "+t.completeArray.length),i.isFunction(e.func)&&e.func.apply(e.func,[e]),i.isFunction(t._onUpdate)&&t._onUpdate.apply(t._onUpdate,[n]),t._loadCounter++,t.loadingHandler()},n.onerror=function(){i.isFunction(t._onError)&&t._onError.apply(t._onError,[n]),t._loadCounter++,t.loadingHandler()},n.onprogress=function(){i.isFunction(t._onProgress)&&t._onProgress.apply(t._onProgress,[n])}},textLoader:function(n){var r=this,t=n.path;n.time.start=new Date;var o=new _(t);o.onData=function(e){n.filesize.bytes=o.responseBytes.length,n.filesize.KiB=o.responseBytes.length/1024,n.filesize.MiB=o.responseBytes.length/1024/1024,n.filesize.GiB=o.responseBytes.length/1024/1024/1024;try{n.str=e,n.time.end=new Date,n.time.durationMS=n.time.end.getTime()-n.time.start.getTime(),n.time.durationS=(n.time.end.getTime()-n.time.start.getTime())/1e3,n.type==v.Json?n.json=JSON.parse(e):n.json="",r.completeArray.push(n),i.isFunction(n.func)&&n.func.apply(n.func,[n]),i.isFunction(r._onUpdate)&&r._onUpdate.apply(r._onUpdate,["_img"]),r._loadCounter++,r.loadingHandler()}catch(e){var t=m.caught(e).unwrap();r.get__isDebug()&&console.log("src/sketcher/load/Loader.hx:356:",t),i.isFunction(r._onError)&&r._onError.apply(r._onError,[t]),r._loadCounter++,r.loadingHandler()}},o.onError=function(e){r.get__isDebug()&&h.console.error("error: "+e+", "+t),i.isFunction(r._onError)&&r._onError.apply(r._onError,[e]),r._loadCounter++,r.loadingHandler()},o.onStatus=function(e){r.get__isDebug()&&h.console.debug("status: "+e)},o.request(!1),i.isFunction(this._onInit)&&this._onInit.apply(this._onInit,["start loading file"])},textLoaderBig:function(n){var r=this;this.get__isDebug()&&h.console.info("["+f.string(n.type)+"] loader: "+n.path);var e=n.path;n.time.start=new Date;var o=new XMLHttpRequest;switch(o.open("GET",e,!0),o.onreadystatechange=function(e){4==o.readyState&&404==o.status&&h.console.warn("looks like the file doesn't exist at path: "+n.path)},o.ontimeout=function(e){h.console.log(e)},n.type._hx_index){case 5:case 6:o.responseType="json";break;case 15:o.responseType="text";break;default:o.responseType="text",h.console.warn("case '"+f.string(n.type)+"': trace ('"+f.string(n.type)+"');")}o.onload=function(e){var t=o.response;r.get__isDebug()&&h.console.log(e),n.filesize.bytes=e.total,n.filesize.KiB=e.total/1024,n.filesize.MiB=e.total/1024/1024,n.filesize.GiB=e.total/1024/1024/1024,n.str=t,n.data=t,n.time.end=new Date,n.time.durationMS=n.time.end.getTime()-n.time.start.getTime(),n.time.durationS=(n.time.end.getTime()-n.time.start.getTime())/1e3,r.completeArray.push(n),i.isFunction(n.func)&&n.func.apply(n.func,[n]),i.isFunction(r._onUpdate)&&r._onUpdate.apply(r._onUpdate,["_img"]),r._loadCounter++,r.loadingHandler()},o.onerror=function(e){h.console.warn(e),i.isFunction(r._onError)&&r._onError.apply(r._onError,[e]),r._loadCounter++,r.loadingHandler()},o.onprogress=function(e){i.isFunction(r._onProgress)&&r._onProgress.apply(r,[e.loaded,e.total,e.loaded/e.total])},o.onloadstart=function(){r.get__isDebug()&&h.console.debug("["+f.string(n.type)+"] onloadstart"),i.isFunction(r._onProgress)&&r._onProgress.apply(r._onProgress,[0,1,0]),i.isFunction(r._onInit)&&r._onInit.apply(r._onInit,["init"])},o.onloadend=function(){r.get__isDebug()&&h.console.debug("["+f.string(n.type)+"] onloadend"),i.isFunction(r._onProgress)&&r._onProgress.apply(r._onProgress,[1,1,1])},o.send()},get__id:function(){return this._id},set__id:function(e){return this._id=e},get__loadingArray:function(){return this._loadingArray},set__loadingArray:function(e){return this._loadingArray=e},get__isDebug:function(){return this._isDebug},set__isDebug:function(e){return this._isDebug=e},toString:function(){return"[Loader]"}};var v=d["sketcher.load.FileType"]={__ename__:!0,__constructs__:["Unknown","Img","IMG","Txt","TXT","Json","JSON","Gif","GIF","Png","PNG","JPEG","JPG","Xml","XML","Svg","SVG","Csv","CSV"],Unknown:{_hx_index:0,__enum__:"sketcher.load.FileType",toString:t},Img:{_hx_index:1,__enum__:"sketcher.load.FileType",toString:t},IMG:{_hx_index:2,__enum__:"sketcher.load.FileType",toString:t},Txt:{_hx_index:3,__enum__:"sketcher.load.FileType",toString:t},TXT:{_hx_index:4,__enum__:"sketcher.load.FileType",toString:t},Json:{_hx_index:5,__enum__:"sketcher.load.FileType",toString:t},JSON:{_hx_index:6,__enum__:"sketcher.load.FileType",toString:t},Gif:{_hx_index:7,__enum__:"sketcher.load.FileType",toString:t},GIF:{_hx_index:8,__enum__:"sketcher.load.FileType",toString:t},Png:{_hx_index:9,__enum__:"sketcher.load.FileType",toString:t},PNG:{_hx_index:10,__enum__:"sketcher.load.FileType",toString:t},JPEG:{_hx_index:11,__enum__:"sketcher.load.FileType",toString:t},JPG:{_hx_index:12,__enum__:"sketcher.load.FileType",toString:t},Xml:{_hx_index:13,__enum__:"sketcher.load.FileType",toString:t},XML:{_hx_index:14,__enum__:"sketcher.load.FileType",toString:t},Svg:{_hx_index:15,__enum__:"sketcher.load.FileType",toString:t},SVG:{_hx_index:16,__enum__:"sketcher.load.FileType",toString:t},Csv:{_hx_index:17,__enum__:"sketcher.load.FileType",toString:t},CSV:{_hx_index:18,__enum__:"sketcher.load.FileType",toString:t}};function w(e,t){return null==t?null:(null==t.__id__&&(t.__id__=h.$haxeUID++),null==e.hx__closures__?e.hx__closures__={}:n=e.hx__closures__[t.__id__],null==n&&(n=t.bind(e),e.hx__closures__[t.__id__]=n),n);var n}h.$haxeUID|=0,null==String.fromCodePoint&&(String.fromCodePoint=function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55232+(e>>10))+String.fromCharCode(56320+(1023&e))}),String.__name__=!0,Array.__name__=!0,Date.__name__="Date",x.__toStr={}.toString}("undefined"!=typeof exports?exports:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);